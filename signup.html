<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - My App</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- Firebase Initialization Script -->
    <script type="module" src="firebase-init.js"></script>
</head>
<body>
    <div class="container">
        <h2>Create an Account</h2>
        
        <!-- Sign Up Form -->
        <input type="email" id="signup-email" placeholder="Email" required>
        <input type="password" id="signup-password" placeholder="Password" required>
        <button id="signup-btn">Sign Up</button>

        <a href="index.html">Already have an account? Login</a>
    </div>

    <!-- Custom Script -->
    <script type="module">
        import { auth } from './firebase-init.js';
        import { createUserWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js';

        const signupBtn = document.getElementById("signup-btn");
        const signupEmailInput = document.getElementById("signup-email");
        const signupPasswordInput = document.getElementById("signup-password");

        // Sign-Up Functionality
        signupBtn.addEventListener("click", () => {
            const email = signupEmailInput.value.trim();
            const password = signupPasswordInput.value.trim();

            createUserWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    user.sendEmailVerification()  // Send verification email
                        .then(() => {
                            showNotification('Please check your email for the verification link.', 'success');
                            window.location.href = 'index.html';  // Redirect to login
                        })
                        .catch((error) => {
                            showNotification(error.message, 'error');
                        });
                })
                .catch((error) => {
                    showNotification(error.message, 'error');
                });
        });

        // Show Notifications
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.classList.add('notification', type === 'success' ? 'show' : '');
            notification.classList.add(type);
            notification.innerHTML = `
                <span>${message}</span>
                <button class="close-btn">&times;</button>
            `;
            document.body.appendChild(notification);

            notification.querySelector('.close-btn').addEventListener('click', () => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 500);
            });

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 500);
            }, 5000);
        }
    </script>
</body>
</html>
